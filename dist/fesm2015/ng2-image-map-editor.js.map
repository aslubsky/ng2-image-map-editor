{"version":3,"file":"ng2-image-map-editor.js","sources":["../../src/utils.class.ts","../../src/help.class.ts","../../src/area.class.ts","../../src/helper.class.ts","../../src/rectangle.class.ts","../../src/circle.class.ts","../../src/polygon.class.ts","../../src/area-factory.class.ts","../../src/app-event.class.ts","../../src/buttons.class.ts","../../src/editor-app.class.ts","../../src/ng2-image-map-editor.directive.ts","../../src/ng2-image-map-editor.module.ts","../../src/ng2-image-map-editor.ts"],"sourcesContent":["export class Utils {\n    public static app: any;\n\n    /**\n     * Returns offset from html page top-left corner for some element\n     *\n     * @param node {HTMLElement} - html element\n     * @returns {Object} - object with offsets, e.g. {x: 100, y: 200}\n     */\n    public static getOffset(node) {\n        var boxCoords = node.getBoundingClientRect();\n        return {\n            x: Math.round(boxCoords.left + window.pageXOffset),\n            y: Math.round(boxCoords.top + window.pageYOffset)\n        };\n    }\n\n    /**\n     * Returns correct coordinates (incl. offsets)\n     *\n     * @param x {number} - x-coordinate\n     * @param y {number} - y-coordinate\n     * @returns {Object} - object with recalculated coordinates, e.g. {x: 100, y: 200}\n     */\n    public static getRightCoords(x, y) {\n        return {\n            x: x - Utils.app.getOffset('x'),\n            y: y - Utils.app.getOffset('y')\n        };\n    }\n\n    /**\n     * TODO: will use same method of app.js\n     * @deprecated\n     */\n    public static id(str) {\n        return document.getElementById(str);\n    }\n\n    /**\n     * TODO: will use same method of app.js\n     * @deprecated\n     */\n    public static hide(node) {\n        node.style.display = 'none';\n\n        return this;\n    }\n\n    /**\n     * TODO: will use same method of app.js\n     * @deprecated\n     */\n    public static show(node) {\n        node.style.display = 'block';\n\n        return this;\n    }\n\n    /**\n     * Escape < and > (for code output)\n     *\n     * @param str {string} - a string with < and >\n     * @returns {string} - a string with escaped < and >\n     */\n    public static encode(str) {\n        return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n\n    /**\n     * TODO: will use same method of app.js\n     * @deprecated\n     */\n    public static foreach(arr, func) {\n        for (var i = 0, count = arr.length; i < count; i++) {\n            func(arr[i], i);\n        }\n    }\n\n    /**\n     * TODO: will use same method of app.js\n     * @deprecated\n     */\n    public static foreachReverse(arr, func) {\n        for (var i = arr.length - 1; i >= 0; i--) {\n            func(arr[i], i);\n        }\n    }\n\n    /**\n     * TODO: will use same method of app.js\n     * @deprecated\n     */\n    public static stopEvent(e) {\n        e.stopPropagation();\n        e.preventDefault();\n\n        return this;\n    }\n}","import {Utils} from './utils.class';\n\nexport class Help {\n    public block: any;\n    public overlay: any;\n    public close_button: any;\n\n    constructor() {\n        this.block = Utils.id('help');\n        // console.log('this.block', this.block);\n        this.overlay = Utils.id('overlay');\n        this.close_button = this.block.querySelector('.close_button');\n\n        this.overlay.addEventListener('click', this.hide.bind(this), false);\n        this.close_button.addEventListener('click', this.hide.bind(this), false);\n    }\n\n    public hide() {\n        Utils.hide(this.block);\n        Utils.hide(this.overlay);\n    }\n\n    public show() {\n        Utils.show(this.block);\n        Utils.show(this.overlay);\n    }\n\n}","export class Area {\n    public static app: any;\n    public static SVG_NS: string = 'http://www.w3.org/2000/svg';\n    public static HTML: string = 'http://www.w3.org/1999/xhtml';\n    public static CLASS_NAMES: any = {\n        SELECTED: 'selected',\n        WITH_HREF: 'with_href'\n    };\n\n    protected type: any;\n    protected attributes: any;\n\n    protected _params: any;\n\n    protected _groupEl: any;\n    protected _el: any;\n    protected _helpers: any;\n\n    public delta: any;\n\n    public href: string;\n    public alt: string;\n    public title: string;\n\n\n    constructor(coords: any, type?: any) {\n        // Public properties:\n        this.type = type;\n        this.attributes = {\n            href: '',\n            alt: '',\n            title: ''\n        };\n\n        // Private properties:\n        this._params = {};\n\n        // the g-element, it contains this area and helpers elements\n        this._groupEl = document.createElementNS(Area.SVG_NS, 'g');\n        Area.app.addNodeToSvg(this._groupEl);\n\n        // Todo: remove this fielf from DOM-element\n        /* Link to parent object */\n        this._groupEl.obj = this;\n\n        // svg-dom-element of area\n        this._el = null;\n\n        // Array/object with all helpers of area\n        this._helpers = {}; // or []\n    }\n\n    public testCoords() {\n        throw new Error('This is abstract method');\n    }\n\n    public setCoords(params?: any) {\n        throw new Error('This is abstract method');\n    }\n\n    public redraw(params?: any) {\n        throw new Error('This is abstract method');\n    }\n\n    public remove() {\n        Area.app.removeNodeFromSvg(this._groupEl);\n    }\n\n    public select() {\n        this._el.classList.add(Area.CLASS_NAMES.SELECTED);\n        return this;\n    }\n\n    public deselect() {\n        this._el.classList.remove(Area.CLASS_NAMES.SELECTED);\n        return this;\n    }\n\n    public with_href() {\n        this._el.classList.add(Area.CLASS_NAMES.WITH_HREF);\n        return this;\n    }\n\n    public without_href() {\n        this._el.classList.remove(Area.CLASS_NAMES.WITH_HREF);\n        return this;\n    }\n\n    public setInfoAttributes(params: any) {\n        if (params.href) {\n            this.attributes.href = params.href;\n        }\n\n        if (params.alt) {\n            this.attributes.alt = params.alt;\n        }\n\n        if (params.title) {\n            this.attributes.title = params.title;\n        }\n    }\n\n    public toJSON(): any {\n        return {\n            // type: this._type,//?????\n            coords: this._params,\n            attributes: this.attributes\n        };\n    }\n}","import {Area} from './area.class';\n\n/**\n * The constructor of helpers points\n *\n * @constructor\n * @param node {parentNode} - a node for inserting helper\n * @param x {number} - x - coordinate\n * @param y {number} - y - coordinate\n * @param action {string} - an action by click of this helper\n */\nexport class Helper {\n    public static SIZE: number = 5;\n    public static SIZENum: number = 15;\n    public static OFFSET: number = -Math.ceil(Helper.SIZE / 2);\n    public static CLASS_NAME: string = 'helper';\n    public static ACTIONS_TO_CURSORS: any = {\n        'move': 'move',\n        'editLeft': 'e-resize',\n        'editRight': 'w-resize',\n        'editTop': 'n-resize',\n        'editBottom': 's-resize',\n        'editTopLeft': 'nw-resize',\n        'editTopRight': 'ne-resize',\n        'editBottomLeft': 'sw-resize',\n        'editBottomRight': 'se-resize',\n        'pointMove': 'pointer',\n        'number': 'default'\n    };\n\n    private _el: any;\n\n    constructor(node: any, x: number, y: number, action: string) {\n        if (action == 'number') {\n            this._el = document.createElementNS(Area.SVG_NS, 'text');\n        } else {\n            this._el = document.createElementNS(Area.SVG_NS, 'rect');\n        }\n\n\n        this._el.classList.add(Helper.CLASS_NAME);\n        if (action == 'number') {\n            //this._el.textContent = 'Test';\n            this._el.setAttribute('height', Helper.SIZENum);\n            this._el.setAttribute('width', Helper.SIZENum);\n            this._el.setAttribute('x', x + Helper.OFFSET);\n            this._el.setAttribute('y', y + Helper.OFFSET);\n        } else {\n            this._el.setAttribute('height', Helper.SIZE);\n            this._el.setAttribute('width', Helper.SIZE);\n            this._el.setAttribute('x', x + Helper.OFFSET);\n            this._el.setAttribute('y', y + Helper.OFFSET);\n        }\n\n        node.appendChild(this._el);\n\n        this._el.action = action;\n        this._el.classList.add(Helper.ACTIONS_TO_CURSORS[action]);\n    }\n\n    public setCoords(x: number, y: number) {\n        this._el.setAttribute('x', x + Helper.OFFSET);\n        this._el.setAttribute('y', y + Helper.OFFSET);\n\n        return this;\n    }\n\n    public setNumber(id: number) {\n        this._el.textContent = id + 1;\n    }\n\n    public setId(id: number) {\n        this._el.n = id;\n        return this;\n    }\n}","import {Area} from './area.class';\nimport {Helper} from './helper.class';\nimport {Utils} from './utils.class';\n\n/**\n * The constructor for rectangles\n *\n * Initial state:\n * (x, y) -----\n * |          |\n * -----------\n * with width = 0 and height = 0\n *\n * @constructor\n * @param coords {Object} - coordinates of the begin point, e.g. {x: 100, y: 200}\n */\nexport class Rectangle extends Area {\n    public attributes: any;\n\n    constructor(coords: any, type?: any) {\n        super(coords, 'rectangle');\n\n        /**\n         * @namespace\n         * @property {number} x - Distance from the left edge of the image to the left side of the rectangle\n         * @property {number} y - Distance from the top edge of the image to the top side of the rectangle\n         * @property {number} width - Width of rectangle\n         * @property {number} height - Height of rectangle\n         */\n        this._params = {\n            x: coords.x,\n            y: coords.y,\n            width: 0,\n            height: 0\n        };\n\n        this._el = document.createElementNS(Area.SVG_NS, 'rect');\n        this._groupEl.appendChild(this._el);\n\n        var x = coords.x - this._params.width / 2,\n            y = coords.y - this._params.height / 2;\n\n        this._helpers = {\n            number: new Helper(this._groupEl, x, y, 'number'),\n            center: new Helper(this._groupEl, x, y, 'move'),\n            top: new Helper(this._groupEl, x, y, 'editTop'),\n            bottom: new Helper(this._groupEl, x, y, 'editBottom'),\n            left: new Helper(this._groupEl, x, y, 'editLeft'),\n            right: new Helper(this._groupEl, x, y, 'editRight'),\n            topLeft: new Helper(this._groupEl, x, y, 'editTopLeft'),\n            topRight: new Helper(this._groupEl, x, y, 'editTopRight'),\n            bottomLeft: new Helper(this._groupEl, x, y, 'editBottomLeft'),\n            bottomRight: new Helper(this._groupEl, x, y, 'editBottomRight')\n        };\n        this._helpers.number.setNumber(coords.n);\n        this.select().redraw();\n\n        /* Add this object to array of all objects */\n        Area.app.addObject(this);\n    }\n\n\n    /**\n     * Set attributes for svg-elements of area by new parameters\n     * -----top-----\n     * |           |\n     * ---center_y--\n     * |           |\n     * ---bottom----\n     */\n    public setSVGAttributes(params: any) {\n        this._el.setAttribute('x', params.x);\n        this._el.setAttribute('y', params.y);\n        this._el.setAttribute('width', params.width);\n        this._el.setAttribute('height', params.height);\n\n        var top = params.y,\n            center_y = params.y + params.height / 2,\n            bottom = params.y + params.height,\n            left = params.x,\n            center_x = params.x + params.width / 2,\n            right = params.x + params.width;\n\n        this._helpers.number.setCoords(left, top - 5);\n        this._helpers.center.setCoords(center_x, center_y);\n        this._helpers.top.setCoords(center_x, top);\n        this._helpers.bottom.setCoords(center_x, bottom);\n        this._helpers.left.setCoords(left, center_y);\n        this._helpers.right.setCoords(right, center_y);\n        this._helpers.topLeft.setCoords(left, top);\n        this._helpers.topRight.setCoords(right, top);\n        this._helpers.bottomLeft.setCoords(left, bottom);\n        this._helpers.bottomRight.setCoords(right, bottom);\n        return this;\n    }\n\n    public redraw(params?: any) {\n        this.setSVGAttributes(params ? params : this._params);\n        return this;\n    }\n\n    public setParams(params: any) {\n        this._params.x = params.x;\n        this._params.y = params.y;\n        this._params.width = params.width;\n        this._params.height = params.height;\n\n        return this;\n    }\n\n    public getNormalizedCoords() {\n\n    }\n\n    public dynamicDraw(x1: number, y1: number, isSquare?: boolean) {\n        var x0 = this._params.x,\n            y0 = this._params.y,\n            new_x,\n            new_y,\n            new_width,\n            new_height,\n            delta,\n            temp_params;\n\n        new_width = Math.abs(x1 - x0);\n        new_height = Math.abs(y1 - y0);\n\n        if (isSquare) {\n            delta = new_width - new_height;\n            if (delta > 0) {\n                new_width = new_height;\n            } else {\n                new_height = new_width;\n            }\n        }\n\n        if (x0 > x1) {\n            new_x = x1;\n            if (isSquare && delta > 0) {\n                new_x = x1 + Math.abs(delta);\n            }\n        } else {\n            new_x = x0;\n        }\n\n        if (y0 > y1) {\n            new_y = y1;\n            if (isSquare && delta < 0) {\n                new_y = y1 + Math.abs(delta);\n            }\n        } else {\n            new_y = y0;\n        }\n\n        temp_params = {\n            x: new_x,\n            y: new_y,\n            width: new_width,\n            height: new_height\n        };\n\n        this.setSVGAttributes(temp_params);\n\n        return temp_params;\n    }\n\n\n    public onProcessDrawing(e: any) {\n        var coords = Utils.getRightCoords(e.pageX, e.pageY);\n\n        this.dynamicDraw(coords.x, coords.y, e.shiftKey);\n    }\n\n    public onStopDrawing(e: any) {\n        var coords = Utils.getRightCoords(e.pageX, e.pageY);\n\n        this.setParams(this.dynamicDraw(coords.x, coords.y, e.shiftKey)).deselect();\n\n        Area.app.removeAllEvents()\n            .setIsDraw(false)\n            .resetNewArea();\n    }\n\n    public move(dx: number, dy: number) { //offset x and y\n        var temp_params = Object.create(this._params);\n\n        temp_params.x += dx;\n        temp_params.y += dy;\n\n        return temp_params;\n    }\n\n\n    /**\n     * Changes area parameters by editing type and offsets\n     *\n     * @param {String} editingType - A type of editing\n     * @returns {Object} - Object with changed parameters of area\n     */\n    public edit(editingType: string, dx: number, dy: number) {\n        var tempParams = Object.assign({}, this._params);\n\n        switch (editingType) {\n            case 'move':\n                tempParams.x += dx;\n                tempParams.y += dy;\n                break;\n\n            case 'editLeft':\n                tempParams.x += dx;\n                tempParams.width -= dx;\n                break;\n\n            case 'editRight':\n                tempParams.width += dx;\n                break;\n\n            case 'editTop':\n                tempParams.y += dy;\n                tempParams.height -= dy;\n                break;\n\n            case 'editBottom':\n                tempParams.height += dy;\n                break;\n\n            case 'editTopLeft':\n                tempParams.x += dx;\n                tempParams.y += dy;\n                tempParams.width -= dx;\n                tempParams.height -= dy;\n                break;\n\n            case 'editTopRight':\n                tempParams.y += dy;\n                tempParams.width += dx;\n                tempParams.height -= dy;\n                break;\n\n            case 'editBottomLeft':\n                tempParams.x += dx;\n                tempParams.width -= dx;\n                tempParams.height += dy;\n                break;\n\n            case 'editBottomRight':\n                tempParams.width += dx;\n                tempParams.height += dy;\n                break;\n        }\n\n        return tempParams;\n    }\n\n    public dynamicEdit(temp_params: any, saveProportions: any) {\n        if (temp_params.width < 0) {\n            temp_params.width = Math.abs(temp_params.width);\n            temp_params.x -= temp_params.width;\n        }\n\n        if (temp_params.height < 0) {\n            temp_params.height = Math.abs(temp_params.height);\n            temp_params.y -= temp_params.height;\n        }\n\n        if (saveProportions) {\n            var proportions = this._params.width / this._params.height,\n                new_proportions = temp_params.width / temp_params.height,\n                delta = new_proportions - proportions,\n                x0 = this._params.x,\n                y0 = this._params.y,\n                x1 = temp_params.x,\n                y1 = temp_params.y;\n\n            if (delta > 0) {\n                temp_params.width = Math.round(temp_params.height * proportions);\n            } else {\n                temp_params.height = Math.round(temp_params.width / proportions);\n            }\n\n        }\n\n        this.setSVGAttributes(temp_params);\n\n        return temp_params;\n    }\n\n    public onProcessEditing(e: any) {\n        return this.dynamicEdit(\n            this.edit(\n                Area.app.getEditType(),\n                e.pageX - this.delta.x,\n                e.pageY - this.delta.y\n            ),\n            e.shiftKey\n        );\n    }\n\n    public onStopEditing(e: any) {\n\n        this.setParams(this.onProcessEditing(e));\n        Area.app.removeAllEvents()\n            .setIsDraw(false)\n            .resetNewArea();\n    }\n\n    public toString() { //to html map area code\n        var x2 = this._params.x + this._params.width,\n            y2 = this._params.y + this._params.height;\n\n        return '<area shape=\"rect\" coords=\"' // TODO: use template engine\n            + this._params.x + ', '\n            + this._params.y + ', '\n            + x2 + ', '\n            + y2\n            + '\"'\n            + (this.href ? ' href=\"' + this.href + '\"' : '')\n            + (this.alt ? ' alt=\"' + this.alt + '\"' : '')\n            + (this.title ? ' title=\"' + this.title + '\"' : '')\n            + ' />';\n    }\n\n    public toJSON(): any {\n        return {\n            type: 'rectangle',\n            coords: [\n                this._params.x,\n                this._params.y,\n                this._params.x + this._params.width,\n                this._params.y + this._params.height\n            ],\n            href: this.attributes.href,\n            alt: this.attributes.alt,\n            title: this.attributes.title\n        };\n    }\n\n    /**\n     * Returns true if coords array is valid for rectangles and false otherwise\n     *\n     * @static\n     * @param coords {Array} - coords for new rectangle as array\n     * @return {boolean}\n     */\n    public static testCoords(coords) {\n        return coords.length === 4;\n    }\n\n    public static createFromSaved(params: any) {\n        if (!this.testCoords(params.coords)) {\n            return;\n        }\n\n        Area.app.setIsDraw(true);\n\n        var area = new Rectangle({\n            x: params.coords[0],\n            y: params.coords[1],\n            n: params.number\n        });\n\n        area.setParams(area.dynamicDraw(params.coords[2], params.coords[3])).deselect();\n\n        Area.app.setIsDraw(false)\n            .resetNewArea();\n\n        area.setInfoAttributes(params);\n    }\n    /**\n     * Creates new rectangle and add drawing handlers for DOM-elements\n     *\n     * @param coords {Object} coords\n     * @returns created rectangle\n     */\n    public static  createAndStartDrawing(coords) {\n        coords.n = Area.app.getAreas().length;\n        var newArea = new Rectangle(coords);\n\n        Area.app.addEvent(Area.app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\n            .addEvent(Area.app.domElements.container, 'click', newArea.onStopDrawing.bind(newArea));\n\n        return newArea;\n    }\n}","import {Area} from './area.class';\nimport {Helper} from './helper.class';\nimport {Utils} from './utils.class';\n\n/**\n * The constructor for circles\n *\n * Initial state:\n *      ----\n *  /         \\\n * |  (x, y)  |\n * \\         /\n *    ----\n * with radius = 0\n *\n * @constructor\n * @param coords {Object} - coordinates of the begin pointer, e.g. {x: 100, y: 200}\n */\nexport class Circle extends Area {\n\n    constructor(coords: any, type?: any) {\n        super(coords, 'circle');\n\n        /**\n         * @namespace\n         * @property {number} cx - Distance from the left edge of the image to the center of the circle\n         * @property {number} cy - Distance from the top edge of the image to the center of the circle\n         * @property {number} radius - Radius of the circle\n         */\n        this._params = {\n            cx: coords.x,\n            cy: coords.y,\n            radius: 0\n        }\n\n        this._el = document.createElementNS(Area.SVG_NS, 'circle');\n        this._groupEl.appendChild(this._el);\n\n        this._helpers = { //array of all helpers-rectangles\n            number: new Helper(this._groupEl, coords.x, coords.y, 'number'),\n            center: new Helper(this._groupEl, coords.x, coords.y, 'move'),\n            top: new Helper(this._groupEl, coords.x, coords.y, 'editTop'),\n            bottom: new Helper(this._groupEl, coords.x, coords.y, 'editBottom'),\n            left: new Helper(this._groupEl, coords.x, coords.y, 'editLeft'),\n            right: new Helper(this._groupEl, coords.x, coords.y, 'editRight')\n        }\n        this._helpers.number.setNumber(coords.n);\n        this.select().redraw();\n\n        Area.app.addObject(this); //add this object to array of all objects\n    }\n\n    public setSVGAttributes(params) {\n        this._el.setAttribute('cx', params.cx);\n        this._el.setAttribute('cy', params.cy);\n        this._el.setAttribute('r', params.radius);\n\n        this._helpers.number.setCoords(params.cx, params.cy - params.radius - 5);\n        this._helpers.center.setCoords(params.cx, params.cy);\n        this._helpers.top.setCoords(params.cx, params.cy - params.radius);\n        this._helpers.right.setCoords(params.cx + params.radius, params.cy);\n        this._helpers.bottom.setCoords(params.cx, params.cy + params.radius);\n        this._helpers.left.setCoords(params.cx - params.radius, params.cy);\n\n        return this;\n    }\n\n    public setParams(params) {\n        this._params.cx = params.cx;\n        this._params.cy = params.cy;\n        this._params.radius = params.radius;\n\n        return this;\n    }\n\n    public dynamicDraw(x1, y1) {\n        var x0 = this._params.cx,\n            y0 = this._params.cy,\n            dx,\n            dy,\n            radius,\n            temp_params;\n\n        x1 = x1 || x0;\n        y1 = y1 || y0;\n\n        dx = Math.abs(x0 - x1);\n        dy = Math.abs(y0 - y1);\n        radius = Math.round(Math.sqrt(dx * dx + dy * dy));\n\n        temp_params = {\n            /* params */\n            cx: x0,\n            cy: y0,\n            radius: radius\n        }\n\n        this.setSVGAttributes(temp_params);\n\n        return temp_params;\n    }\n\n    public onProcessDrawing(e) {\n        var coords = Utils.getRightCoords(e.pageX, e.pageY);\n\n        this.dynamicDraw(coords.x, coords.y);\n    }\n\n    public onStopDrawing(e) {\n        var coords = Utils.getRightCoords(e.pageX, e.pageY);\n\n        this.setParams(this.dynamicDraw(coords.x, coords.y)).deselect();\n\n        Area.app.removeAllEvents()\n            .setIsDraw(false)\n            .resetNewArea();\n    }\n\n    public edit(editingType, dx, dy) {\n        var tempParams = Object.assign({}, this._params);\n        switch (editingType) {\n            case 'move':\n                tempParams.cx += dx;\n                tempParams.cy += dy;\n                break;\n\n            case 'editTop':\n                tempParams.radius -= dy;\n                break;\n\n            case 'editBottom':\n                tempParams.radius += dy;\n                break;\n\n            case 'editLeft':\n                tempParams.radius -= dx;\n                break;\n\n            case 'editRight':\n                tempParams.radius += dx;\n                break;\n        }\n        return tempParams;\n    }\n\n    public move(dx, dy) { //offset x and y\n        var temp_params = Object.create(this._params);\n\n        temp_params.cx += dx;\n        temp_params.cy += dy;\n\n        return temp_params;\n    }\n\n    public dynamicEdit(temp_params) {\n        if (temp_params.radius < 0) {\n            temp_params.radius = Math.abs(temp_params.radius);\n        }\n        this.setSVGAttributes(temp_params);\n\n        return temp_params;\n    }\n\n    public onProcessEditing(e) {\n        var editType = Area.app.getEditType();\n        this.dynamicEdit(\n            this.edit(editType, e.pageX - this.delta.x, e.pageY - this.delta.y)\n        );\n    }\n\n    public onStopEditing(e) {\n        var editType = Area.app.getEditType();\n\n        this.setParams(\n            this.dynamicEdit(\n                this.edit(editType, e.pageX - this.delta.x, e.pageY - this.delta.y)\n            )\n        );\n\n        Area.app.removeAllEvents();\n    }\n\n    public toString() { //to html map area code\n        return '<area shape=\"circle\" coords=\"'\n            + this._params.cx + ', '\n            + this._params.cy + ', '\n            + this._params.radius\n            + '\"'\n            + (this.href ? ' href=\"' + this.href + '\"' : '')\n            + (this.alt ? ' alt=\"' + this.alt + '\"' : '')\n            + (this.title ? ' title=\"' + this.title + '\"' : '')\n            + ' />';\n    }\n\n    /**\n     * Returns true if coords array is valid for circles and false otherwise\n     *\n     * @static\n     * @param coords {Array} - coords for new circle as array\n     * @return {boolean}\n     */\n    public static testCoords(coords) {\n        return coords.length === 3;\n    }\n\n    public static createFromSaved(params) {\n        if (!this.testCoords(params.coords)) {\n            return;\n        }\n\n        Area.app.setIsDraw(true);\n        var area = new Circle({\n            x: params.coords[0],\n            y: params.coords[1],\n            n: params.number\n        });\n\n        area.setParams(area.dynamicDraw(\n            params.coords[0],\n            params.coords[1] + params.coords[2]\n        )).deselect();\n\n        Area.app.setIsDraw(false)\n            .resetNewArea();\n\n        area.setInfoAttributes(params);\n    }\n\n    public toJSON(): any {\n        return {\n            type: 'circle',\n            coords: [\n                this._params.cx,\n                this._params.cy,\n                this._params.radius\n            ],\n            href: this.attributes.href,\n            alt: this.attributes.alt,\n            title: this.attributes.title\n        }\n    }\n\n    public redraw(params?: any) {\n        this.setSVGAttributes(params ? params : this._params);\n        return this;\n    }\n\n    /**\n     * Creates new circle and add drawing handlers for DOM-elements\n     *\n     * @param coords {Object} coords\n     * @returns created circle\n     */\n    public static createAndStartDrawing(coords) {\n        coords.n = Area.app.getAreas().length;\n        var newArea = new Circle(coords);\n\n        Area.app.addEvent(Area.app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\n            .addEvent(Area.app.domElements.container, 'click', newArea.onStopDrawing.bind(newArea));\n\n        return newArea;\n    }\n}","import {Area} from './area.class';\nimport {Helper} from './helper.class';\nimport {Utils} from './utils.class';\n\n/**\n * The constructor for polygons\n *\n * Initial state:\n *    (x, y)\n * only one point of the line\n *\n * @constructor\n * @param coords {Object} - coordinates of the begin pointer, e.g. {x: 100, y: 200}\n */\nexport class Polygon extends Area {\n\n    private selected_point: number;\n    private _polyline: any;\n\n    constructor(coords: any, type?: any) {\n        super(coords, 'polygon');\n\n        /**\n         * @namespace\n         * @property {array} points - Array of coordinates of polygon points\n         */\n        this._params = {\n            points: [coords.x, coords.y]\n        }\n\n        this._el = document.createElementNS(Area.SVG_NS, 'polyline');\n        this._groupEl.appendChild(this._el);\n\n        this._helpers = [ //array of all helpers-rectangles\n            new Helper(this._groupEl, this._params.points[0], this._params.points[1], 'number'),\n            (new Helper(this._groupEl, this._params.points[0], this._params.points[1], 'pointMove')).setId(1)\n        ];\n        this._helpers[0].setNumber(coords.n);\n        this.selected_point = -1;\n\n        this.select().redraw();\n\n        Area.app.addObject(this); //add this object to array of all objects\n    }\n\n\n    public setCoords(params?: any) {\n        var coords_values = params.points.join(' ');\n        this._el.setAttribute('points', coords_values);\n        Utils.foreach(this._helpers, function (x, i) {\n            if (x._el.action == 'number') {\n                x.setCoords(params.points[0], params.points[1]);\n            } else {\n                i = i - 1;\n                x.setCoords(params.points[2 * i], params.points[2 * i + 1]);\n            }\n            //x.setCoords(params.points[2 * i], params.points[2 * i + 1]);\n        });\n\n        return this;\n    }\n\n    public setSVGAttributes(params) {\n        var coords_values = params.points.join(' ');\n        this._el.setAttribute('points', coords_values);\n\n        Utils.foreach(this._helpers, function (helper, i) {\n            if (helper._el.action == 'number') {\n                helper.setCoords(params.points[0], params.points[1]);\n            } else {\n                i = i - 1;\n                helper.setCoords(params.points[2 * i], params.points[2 * i + 1]);\n            }\n        });\n        return this;\n    }\n\n    public setParams(arr) {\n        if (arr.isArray) {\n            this._params.points = Array.prototype.slice.call(arr);\n        } else {\n            this._params.points = Array.prototype.slice.call(arr.points);\n        }\n        return this;\n    }\n\n    public addPoint(x, y) {\n        var helper = new Helper(this._groupEl, x, y, 'pointMove');\n        helper.setId(this._helpers.length);\n        this._helpers.push(helper);\n        this._params.points.push(x, y);\n        this.redraw();\n\n        return this;\n    }\n\n    public right_angle(x, y) {\n        var old_x = this._params.points[this._params.points.length - 2],\n            old_y = this._params.points[this._params.points.length - 1],\n            dx = x - old_x,\n            dy = -(y - old_y),\n            tan = dy / dx; //tangens\n\n        if (dx > 0 && dy > 0) {\n            if (tan > 2.414) {\n                x = old_x;\n            } else if (tan < 0.414) {\n                y = old_y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ? x = old_x + dy : y = old_y - dx;\n            }\n        } else if (dx < 0 && dy > 0) {\n            if (tan < -2.414) {\n                x = old_x;\n            } else if (tan > -0.414) {\n                y = old_y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ? x = old_x - dy : y = old_y + dx;\n            }\n        } else if (dx < 0 && dy < 0) {\n            if (tan > 2.414) {\n                x = old_x;\n            } else if (tan < 0.414) {\n                y = old_y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ? x = old_x + dy : y = old_y - dx;\n            }\n        } else if (dx > 0 && dy < 0) {\n            if (tan < -2.414) {\n                x = old_x;\n            } else if (tan > -0.414) {\n                y = old_y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ? x = old_x - dy : y = old_y + dx;\n            }\n        }\n\n        return {\n            x: x,\n            y: y\n        }\n    }\n\n    public dynamicDraw(x, y, right_angle) {\n        var temp_params = {\n            points: [].concat(this._params.points)\n        }\n\n        if (right_angle) {\n            var right_coords = this.right_angle(x, y);\n            x = right_coords.x;\n            y = right_coords.y;\n        }\n\n        temp_params.points.push(x, y);\n\n        this.redraw(temp_params);\n\n        return temp_params;\n    }\n\n    public onProcessDrawing(e) {\n        var coords = Utils.getRightCoords(e.pageX, e.pageY);\n\n        this.dynamicDraw(coords.x, coords.y, e.shiftKey);\n    }\n\n    public onAddPointDrawing(e) {\n        var coords = Utils.getRightCoords(e.pageX, e.pageY);\n\n        if (e.shiftKey) {\n            coords = this.right_angle(coords.x, coords.y);\n        }\n\n        this.addPoint(coords.x, coords.y);\n    }\n\n    public onStopDrawing(e) {\n        if (e.type == 'click' || (e.type == 'keydown' && e.keyCode == 13)) {\n            if (this._params.points.length >= 6) {//>= 3 points for polygon\n                this._polyline = this._el;\n                this._el = document.createElementNS(Area.SVG_NS, 'polygon');\n                this._groupEl.replaceChild(this._el, this._polyline);\n                this.redraw(this._params).deselect();\n                delete(this._polyline);\n\n                Area.app.removeAllEvents()\n                    .setIsDraw(false)\n                    .resetNewArea();\n            }\n        }\n        e.stopPropagation();\n    }\n\n    public redraw(params?: any) {\n        this.setSVGAttributes(params ? params : this._params);\n        return this;\n    }\n\n    public move(x, y) { //offset x and y\n        //var temp_params = Object.create(this._params);\n        var temp_params = this._params;\n\n        for (var i = 0, count = this._params.points.length; i < count; i++) {\n            this._params.points[i] += (i % 2 ? y : x);\n        }\n        return temp_params;\n    }\n\n    public pointMove(x, y) {//offset x and y\n        if (this.selected_point == 1) {\n            this._params.points[0] += x;\n            this._params.points[1] += y;\n        } else {\n            this._params.points[2 * this.selected_point - 2] += x;\n            this._params.points[2 * this.selected_point - 1] += y;\n        }\n\n        return this._params;\n    }\n\n    public dynamicEdit(temp_params) {\n        this.setCoords(temp_params);\n\n        return temp_params;\n    }\n\n    public onProcessEditing(e) {\n        var editType = Area.app.getEditType();\n        if (typeof this[editType] === 'function') {\n            this.dynamicEdit(\n                this[editType](e.pageX - this.delta.x, e.pageY - this.delta.y)\n            );\n            this.delta.x = e.pageX;\n            this.delta.y = e.pageY;\n        }\n    }\n\n    public onStopEditing(e) {\n        var editType = Area.app.getEditType();\n        this.setParams(\n            this.dynamicEdit(\n                this[editType](e.pageX - this.delta.x, e.pageY - this.delta.y)\n            )\n        );\n        Area.app.removeAllEvents();\n    }\n\n    public toString() { //to html map area code\n        for (var i = 0, count = this._params.points.length, str = ''; i < count; i++) {\n            str += this._params.points[i];\n            if (i != count - 1) {\n                str += ', ';\n            }\n        }\n\n        return '<area shape=\"poly\" coords=\"'\n            + str\n            + '\"'\n            + (this.href ? ' href=\"' + this.href + '\"' : '')\n            + (this.alt ? ' alt=\"' + this.alt + '\"' : '')\n            + (this.title ? ' title=\"' + this.title + '\"' : '')\n            + ' />';\n    }\n\n    /**\n     * Returns true if coords array is valid for polygons and false otherwise\n     *\n     * @static\n     * @param coords {Array} - coords for new polygon as array\n     * @return {boolean}\n     */\n    public static testCoords(coords) {\n        return coords.length >= 6 && coords.length % 2 === 0;\n    }\n\n    public static createFromSaved(params) {\n        if (!this.testCoords(params.coords)) {\n            return;\n        }\n\n        Area.app.setIsDraw(true);\n\n        var area = new Polygon({\n            x: params.coords[0],\n            y: params.coords[1],\n            n: params.number\n        });\n\n        for (var i = 2, c = params.coords.length; i < c; i += 2) {\n            area.addPoint(params.coords[i], params.coords[i + 1]);\n        }\n\n        area._polyline = area._el;\n        area._el = document.createElementNS(Area.SVG_NS, 'polygon');\n        area._groupEl.replaceChild(area._el, area._polyline);\n\n        area.setCoords(area._params).deselect();\n        delete(area._polyline);\n\n        Area.app.setIsDraw(false)\n            .resetNewArea();\n\n        area.setInfoAttributes(params);\n\n    }\n\n    /**\n     * Creates new polygon and add drawing handlers for DOM-elements\n     *\n     * @param coords {Object} coords\n     * @returns created polygon\n     */\n    public static createAndStartDrawing(coords) {\n        coords.n = Area.app.getAreas().length;\n        var newArea = new Polygon(coords);\n\n        Area.app.addEvent(Area.app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\n            .addEvent(Area.app.domElements.container, 'click', newArea.onAddPointDrawing.bind(newArea))\n            .addEvent(document, 'keydown', newArea.onStopDrawing.bind(newArea))\n            .addEvent(newArea._helpers[0]._el, 'click', newArea.onStopDrawing.bind(newArea));\n\n        return newArea;\n    }\n\n    public toJSON(): any {\n        return {\n            type: 'polygon',\n            coords: this._params.points,\n            href: this.attributes.href,\n            alt: this.attributes.alt,\n            title: this.attributes.title\n        }\n    }\n}","import {Rectangle} from './rectangle.class';\nimport {Circle} from './circle.class';\nimport {Polygon} from './polygon.class';\n\nexport class AreaFactory {\n    public static CONSTRUCTORS: any = {\n        rectangle: Rectangle,\n        circle: Circle,\n        polygon: Polygon\n    };\n}","export class AppEvent {\n    public target: any;\n    public func: any;\n    public eventType: any;\n\n    constructor(target: any, eventType: any, func: any,) {\n        this.target = target;\n        this.eventType = eventType;\n        this.func = func;\n\n        target.addEventListener(eventType, func, false);\n    }\n\n    public remove() {\n        this.target.removeEventListener(this.eventType, this.func, false);\n    }\n}","import {Utils} from './utils.class';\nimport {Area} from './area.class';\nimport {EditorApp} from './editor-app.class';\n\n/* Buttons and actions */\nexport class Buttons {\n    public all = Utils.id('nav').getElementsByTagName('li');\n    public rectangle = Utils.id('rectangle');\n    public circle = Utils.id('circle');\n    public polygon = Utils.id('polygon');\n    public edit = Utils.id('edit');\n    public clear = Utils.id('clear');\n    public to_html = Utils.id('to_html');\n    public show_help = Utils.id('show_help');\n\n\n    constructor(private app: EditorApp) {\n        this.rectangle.addEventListener('click', this.onShapeButtonClick.bind(this), false);\n        this.circle.addEventListener('click', this.onShapeButtonClick.bind(this), false);\n        this.polygon.addEventListener('click', this.onShapeButtonClick.bind(this), false);\n        this.clear.addEventListener('click', this.onClearButtonClick.bind(this), false);\n        this.to_html.addEventListener('click', this.onToHtmlButtonClick.bind(this), false);\n        this.edit.addEventListener('click', this.onEditButtonClick.bind(this), false);\n        this.show_help.addEventListener('click', this.onShowHelpButtonClick.bind(this), false);\n    }\n\n    public deselectAll() {\n        Utils.foreach(this.all, function (x) {\n            x.classList.remove(Area.CLASS_NAMES.SELECTED);\n        });\n    }\n\n    public selectOne(button: any) {\n        this.deselectAll();\n        button.classList.add(Area.CLASS_NAMES.SELECTED);\n    }\n\n    public onShapeButtonClick(e) {\n        e.preventDefault();\n        var target = e.target.id ? e.target : e.target.parentNode;\n\n        // console.log('onShapeButtonClick', e, this, target, target.id);\n\n        this.onSetInvalid();\n\n        this.app.setMode('drawing')\n            .setDrawClass()\n            .setShape(target.id)\n            .deselectAll()\n            .hidePreview();\n        // this.app.info.unload();\n        this.selectOne(target);\n    }\n\n    public onClearButtonClick(e) {\n        e.preventDefault();\n        // console.log('onClearButtonClick', e, this);\n\n        // Clear all\n        if (confirm('Clear all?')) {\n            this.onSetInvalid();\n\n            this.app.setMode(null)\n                .setDefaultClass()\n                .setShape(null)\n                .clear()\n                .hidePreview();\n            this.deselectAll();\n        }\n    }\n\n\n    public onToHtmlButtonClick(e) {\n        var answers = this.app.getAreas();\n        var scale = 1;\n        if (this.app.state.image.width > this.app.domElements.img.clientWidth) {\n            scale = Number((this.app.state.image.width / this.app.domElements.img.clientWidth).toFixed(3));\n        } else {\n            scale = 1;\n        }\n        var resultsAnswers: any[] = [];\n        answers.forEach(function (item, i, arr) {\n            var imgMapData = item.toJSON();\n            imgMapData.coords.forEach(function (item, i, arr) {\n                imgMapData.coords[i] = Math.round(item * scale);\n            });\n            resultsAnswers.push({\n                body: item.attributes.title,\n                is_right: (item.attributes.alt == '1') ? true : false,\n                img_map: JSON.stringify(imgMapData)\n            });\n        });\n\n        this.onData(resultsAnswers, this.app.getAreasJSON(scale));\n\n        // Generate html code only\n        e.preventDefault();\n    }\n\n\n    public onEditButtonClick(e) {\n        e.preventDefault();\n\n        this.onSetInvalid();\n\n        if (this.app.getMode() === 'editing') {\n            this.app.setMode(null)\n                .setDefaultClass()\n                .deselectAll();\n            this.deselectAll();\n            Utils.show(this.app.domElements.svg);\n        } else {\n            this.app.setShape(null)\n                .setMode('editing')\n                .setEditClass();\n            this.selectOne(this.edit);\n        }\n        this.app.hidePreview();\n    }\n\n    public onData(answers: any[], areas: any) {\n\n    }\n\n    public onSetInvalid() {\n\n    }\n\n    public onShowHelpButtonClick(e) {\n        this.app.help.show();\n        e.preventDefault();\n    }\n}\n","import {Utils} from './utils.class';\n// import {Info} from './info.class';\n// import {Code} from './code.class';\nimport {Help} from './help.class';\nimport {AreaFactory} from './area-factory.class';\nimport {AppEvent} from './app-event.class';\nimport {Buttons} from './buttons.class';\n\nexport class CursorPositionInfo {\n    private _coords_info: any = Utils.id('coords');\n\n    public set(coords: any) {\n        this._coords_info.innerHTML = 'x: ' + coords.x + ', ' + 'y: ' + coords.y;\n    }\n\n    public empty() {\n        this._coords_info.innerHTML = '';\n    }\n}\n\n\nexport class EditorApp {\n    public domElements: any = {\n        wrapper: Utils.id('wrapper'),\n        svg: Utils.id('svg'),\n        img: Utils.id('img'),\n        container: Utils.id('image'),\n        map: null,\n        editor: Utils.id('editor')\n    };\n\n    public img: any = Utils.id('img');\n\n    public state: any = {\n        offset: {\n            x: 0,\n            y: 0\n        },\n        appMode: null, // drawing || editing || preview\n        currentType: null,\n        editType: null,\n        newArea: null,\n        selectedArea: null,\n        areas: [],\n        events: [],\n        isDraw: false,\n        image: {\n            src: null,\n            filename: null,\n            width: 0,\n            height: 0\n        }\n    };\n\n    public static KEYS: any = {\n        F1: 112,\n        ESC: 27,\n        TOP: 38,\n        BOTTOM: 40,\n        LEFT: 37,\n        RIGHT: 39,\n        DELETE: 46,\n        I: 73,\n        S: 83,\n        C: 67\n    };\n\n    public cursor_position_info: CursorPositionInfo;\n    // public info: Info = new Info();\n    // public code: Code = new Code();\n    public help: Help = new Help();\n    public buttons: Buttons;\n\n    public filename: any = null;\n\n    constructor() {\n        /* Get offset value */\n        window.addEventListener('resize', this.recalcOffsetValues.bind(this), false);\n\n        /* Disable selection */\n        this.domElements.container.addEventListener('mousedown', (e) => {\n            e.preventDefault();\n        }, false);\n\n        /* Disable image dragging */\n        this.domElements.img.addEventListener('dragstart', (e) => {\n            e.preventDefault();\n        }, false);\n\n        this.cursor_position_info = new CursorPositionInfo();\n\n        this.domElements.container.addEventListener('mousemove', (e) => {\n            this.cursor_position_info.set(Utils.getRightCoords(e.pageX, e.pageY));\n        }, false);\n\n        this.domElements.container.addEventListener('mouseleave', () => {\n            this.cursor_position_info.empty();\n        }, false);\n\n\n        this.domElements.container.addEventListener('mousedown', this.onSvgMousedown.bind(this), false);\n        this.domElements.container.addEventListener('click', this.onSvgClick.bind(this), false);\n        this.domElements.container.addEventListener('dblclick', this.onAreaDblClick.bind(this), false);\n\n        this.domElements.editor.addEventListener('keydown', this.onDocumentKeyDown.bind(this), false);\n\n        this.buttons = new Buttons(this);\n    }\n\n    public recalcOffsetValues() {\n        this.state.offset = Utils.getOffset(this.domElements.container);\n    }\n\n    /* Add mousedown event for svg */\n    public onSvgMousedown(e: any) {\n        if (this.state.appMode === 'editing') {\n            if (e.target.parentNode.tagName === 'g') {\n                // this.info.unload();\n                this.state.selectedArea = e.target.parentNode.obj;\n                this.deselectAll();\n                this.state.selectedArea.select();\n                this.state.selectedArea.delta = {\n                    'x': e.pageX,\n                    'y': e.pageY\n                };\n\n                if (e.target.classList.contains('helper')) {\n                    var helper = e.target;\n                    this.state.editType = helper.action;\n\n                    if (helper.n >= 0) { // if typeof selected_area == polygon\n                        this.state.selectedArea.selected_point = helper.n;\n                    }\n\n                    this.addEvent(this.domElements.container,\n                        'mousemove',\n                        this.state.selectedArea.onProcessEditing.bind(this.state.selectedArea))\n                        .addEvent(this.domElements.container,\n                            'mouseup',\n                            this.state.selectedArea.onStopEditing.bind(this.state.selectedArea));\n                } else if (e.target.tagName === 'rect' || e.target.tagName === 'circle' || e.target.tagName === 'polygon') {\n                    this.state.editType = 'move';\n                    this.addEvent(this.domElements.container,\n                        'mousemove',\n                        this.state.selectedArea.onProcessEditing.bind(this.state.selectedArea))\n                        .addEvent(this.domElements.container,\n                            'mouseup',\n                            this.state.selectedArea.onStopEditing.bind(this.state.selectedArea));\n                }\n            } else {\n                this.deselectAll();\n                // this.info.unload();\n            }\n        }\n    }\n\n    /* Add click event for svg */\n    public onSvgClick(e) {\n        if (this.state.appMode === 'drawing' && !this.state.isDraw && this.state.currentType) {\n            // this.code.hide();\n            this.setIsDraw(true);\n\n            this.state.newArea = AreaFactory.CONSTRUCTORS[this.state.currentType].createAndStartDrawing(\n                Utils.getRightCoords(e.pageX, e.pageY)\n            );\n        }\n    }\n\n    /* Add dblclick event for svg */\n    public onAreaDblClick(e) {\n        if (this.state.appMode === 'editing') {\n            if (e.target.tagName === 'rect' || e.target.tagName === 'circle' || e.target.tagName === 'polygon') {\n                this.state.selectedArea = e.target.parentNode.obj;\n                // this.info.load(this.state.selectedArea, e.pageX, e.pageY);\n            }\n        }\n    }\n\n    /* Add keydown event for document */\n    public onDocumentKeyDown(e: any) {\n        var ctrlDown = e.ctrlKey || e.metaKey; // PC || Mac\n\n        switch (e.keyCode) {\n            case EditorApp.KEYS.F1:\n                this.help.show();\n                e.preventDefault();\n\n                break;\n\n            case EditorApp.KEYS.ESC:\n                this.help.hide();\n                if (this.state.isDraw) {\n                    this.state.isDraw = false;\n                    this.state.newArea.remove();\n                    this.state.areas.pop();\n                    this.removeAllEvents();\n                } else if (this.state.appMode === 'editing') {\n                    this.state.selectedArea.redraw();\n                    this.removeAllEvents();\n                }\n\n                break;\n\n            case EditorApp.KEYS.TOP:\n                if (this.state.appMode === 'editing' && this.state.selectedArea) {\n                    this.state.selectedArea.setParams(\n                        this.state.selectedArea.dynamicEdit(this.state.selectedArea.move(0, -1))\n                    );\n                    e.preventDefault();\n                }\n\n                break;\n\n            case EditorApp.KEYS.BOTTOM:\n                if (this.state.appMode === 'editing' && this.state.selectedArea) {\n                    this.state.selectedArea.setParams(\n                        this.state.selectedArea.dynamicEdit(this.state.selectedArea.move(0, 1))\n                    );\n                    e.preventDefault();\n                }\n                break;\n\n            case EditorApp.KEYS.LEFT:\n                if (this.state.appMode === 'editing' && this.state.selectedArea) {\n                    this.state.selectedArea.setParams(\n                        this.state.selectedArea.dynamicEdit(this.state.selectedArea.move(-1, 0))\n                    );\n                    e.preventDefault();\n                }\n\n                break;\n\n            case EditorApp.KEYS.RIGHT:\n                if (this.state.appMode === 'editing' && this.state.selectedArea) {\n                    this.state.selectedArea.setParams(\n                        this.state.selectedArea.dynamicEdit(this.state.selectedArea.move(1, 0))\n                    );\n                    e.preventDefault();\n                }\n\n                break;\n\n            case EditorApp.KEYS.DELETE:\n                if (this.state.appMode === 'editing' && this.state.selectedArea) {\n                    this.removeObject(this.state.selectedArea);\n                    this.state.selectedArea = null;\n                    // this.info.unload();\n                }\n\n                break;\n\n            case EditorApp.KEYS.I:\n                if (this.state.appMode === 'editing' && this.state.selectedArea) {\n                    var params = this.state.selectedArea.params,\n                        x = params.x || params.cx || params[0],\n                        y = params.y || params.cy || params[1];\n\n                    // this.info.load(this.state.selectedArea, x + this.getOffset('x'), y + this.getOffset('y'));\n                }\n\n                break;\n\n            case EditorApp.KEYS.C:\n                if (this.state.appMode === 'editing' && this.state.selectedArea && ctrlDown) {\n                    var Constructor = AreaFactory.CONSTRUCTORS[area_params.type],\n                        area_params = this.state.selectedArea.toJSON();\n\n                    if (Constructor) {\n                        Constructor.createFromSaved(area_params);\n                        this.state.selectedArea.setParams(this.state.selectedArea.move(10, 10));\n                        this.state.selectedArea.redraw();\n                    }\n                }\n\n                break;\n        }\n    }\n\n\n    public hide() {\n        Utils.hide(this.domElements.container);\n        return this;\n    }\n\n    public show() {\n        Utils.show(this.domElements.container);\n        return this;\n    }\n\n    public setDimensions(width, height) {\n        this.domElements.svg.setAttribute('width', width);\n        this.domElements.svg.setAttribute('height', height);\n        this.domElements.container.style.width = width + 'px';\n        this.domElements.container.style.height = height + 'px';\n        return this;\n    }\n\n    public onImageLoaded(state: any) {\n\n    }\n\n    public loadImage(url, width) {\n        this.domElements.img.src = url;\n        this.state.image.src = url;\n        this.state.image.width = width;\n        var tmp_arr = url.split('/');\n        this.filename = tmp_arr[tmp_arr.length - 1];\n        this.domElements.img.onload = () => {\n            this.show()\n                .setDimensions(this.domElements.img.width, this.domElements.img.height)\n                .recalcOffsetValues();\n\n            this.onImageLoaded(this.state);\n        };\n\n        this.setFilename(this.filename);\n\n        this.preview();\n\n        return this;\n    }\n\n    public preview() {\n        this.domElements.img.setAttribute('usemap', '#map');\n        this.domElements.map = document.createElement('map');\n        this.domElements.map.setAttribute('name', 'map');\n        this.domElements.container.appendChild(this.domElements.map);\n\n        // Utils.hide(this.domElements.svg);\n        // this.map.innerHTML = this.app.getHTMLCode();\n\n//     return function () {\n//         info.unload();\n//         app.onEditingProcesshape(null);\n//         Utils.hide(domElements.svg);\n//         map.innerHTML = app.getHTMLCode();\n//         code.print();\n//         return this;\n//     };\n    }\n\n    public hidePreview() {\n        Utils.show(this.domElements.svg);\n        this.domElements.map.innerHTML = '';\n        return this;\n    }\n\n    public addNodeToSvg(node) {\n        this.domElements.svg.appendChild(node);\n        return this;\n    }\n\n    public removeNodeFromSvg(node) {\n        this.domElements.svg.removeChild(node);\n        return this;\n    }\n\n    public getOffset(arg) {\n        switch (arg) {\n            case 'x':\n            case 'y':\n                return this.state.offset[arg];\n        }\n    }\n\n    public clear() {\n        //remove all areas\n        this.state.areas.length = 0;\n        while (this.domElements.svg.childNodes[0]) {\n            this.domElements.svg.removeChild(this.domElements.svg.childNodes[0]);\n        }\n        // this.code.hide();\n        // this.info.unload();\n        return this;\n    }\n\n    public removeObject(obj) {\n        Utils.foreach(this.state.areas, (x, i) => {\n            if (x === obj) {\n                this.state.areas.splice(i, 1);\n            }\n        });\n        obj.remove();\n        this.state.areas.forEach(function (x, i) {\n            switch (x.type) {\n                case 'rectangle':\n                    x._helpers.number.setNumber(i);\n                    break;\n                case 'polygon':\n                    x._helpers[0].setNumber(i);\n                    break;\n                case 'circle':\n                    x._helpers.number.setNumber(i);\n                    break;\n            }\n        })\n        return this;\n    }\n\n    public deselectAll() {\n        Utils.foreach(this.state.areas, function (x) {\n            x.deselect();\n        });\n        return this;\n    }\n\n    public getIsDraw() {\n        return this.state.isDraw;\n    }\n\n    public setIsDraw(arg) {\n        this.state.isDraw = arg;\n        return this;\n    }\n\n    public setMode(arg) {\n        this.onSetMode(arg);\n        this.state.appMode = arg;\n        return this;\n    }\n\n    public getMode() {\n        return this.state.appMode;\n    }\n\n    public onSetMode(mode) {\n\n    }\n\n    public onCurrentType(type) {\n\n    }\n\n    public setShape(arg) {\n        this.state.currentType = arg;\n        this.onCurrentType(arg);\n        return this;\n    }\n\n    public getShape() {\n        return this.state.currentType;\n    }\n\n    public addObject(object) {\n        this.state.areas.push(object);\n        return this;\n    }\n\n    public getNewArea() {\n        return this.state.newArea;\n    }\n\n    public resetNewArea() {\n        this.state.newArea = null;\n        return this;\n    }\n\n    public getSelectedArea() {\n        return this.state.selectedArea;\n    }\n\n    setSelectedArea(obj) {\n        this.state.selectedArea = obj;\n        return this;\n    }\n\n    public getEditType() {\n        return this.state.editType;\n    }\n\n    public setFilename(str) {\n        this.state.image.filename = str;\n        return this;\n    }\n\n    public setEditClass() {\n        this.domElements.container.classList.remove('draw');\n        this.domElements.container.classList.add('edit');\n\n        return this;\n    }\n\n    public setDrawClass() {\n        this.domElements.container.classList.remove('edit');\n        this.domElements.container.classList.add('draw');\n\n        return this;\n    }\n\n    public setDefaultClass() {\n        this.domElements.container.classList.remove('edit');\n        this.domElements.container.classList.remove('draw');\n\n        return this;\n    }\n\n    public addEvent(target, eventType, func) {\n        this.state.events.push(new AppEvent(target, eventType, func));\n        return this;\n    }\n\n    public removeAllEvents() {\n        Utils.foreach(this.state.events, function (x) {\n            x.remove();\n        });\n        this.state.events.length = 0;\n        return this;\n    }\n\n    // public loadJSON(str, width) {\n    //     var obj = JSON.parse(str);\n    //     this.loadImage(obj.img, width);\n    //     return\n    // }\n\n    public getAreas() {\n        return this.state.areas;\n    }\n\n    public getAreasJSON(scale) {\n        if (scale === undefined) {\n            scale = 1;\n        }\n        var obj = {\n            areas: [],\n            img: this.state.image.src\n        };\n        Utils.foreach(this.state.areas, function (x) {\n            var data = x.toJSON();\n            if (data.type != 'polygon') {\n                data.coords.forEach(function (item, i, arr) {\n                    data.coords[i] = (Math.round(item * scale));\n                });\n            }\n            obj.areas.push(data);\n        });\n        return JSON.stringify(obj);\n    }\n\n    public getHTMLCode(arg) {\n        var html_code = '';\n        if (arg) {\n            if (!this.state.areas.length) {\n                return '0 objects';\n            }\n            html_code += Utils.encode('<img src=\"' + this.state.image.filename + '\" alt=\"\" usemap=\"#map\" />') +\n                '<br />' + Utils.encode('<map name=\"map\">') + '<br />';\n            Utils.foreachReverse(this.state.areas, function (x) {\n                html_code += '&nbsp;&nbsp;&nbsp;&nbsp;' + Utils.encode(x.toString()) + '<br />';\n            });\n            html_code += Utils.encode('</map>');\n        } else {\n            Utils.foreachReverse(this.state.areas, function (x) {\n                html_code += x.toString();\n            });\n        }\n        return html_code;\n    }\n}","import {Component, Input, OnInit, Output, OnChanges, SimpleChanges, EventEmitter, forwardRef} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR, NG_VALIDATORS, FormControl} from '@angular/forms';\nimport {EditorApp} from './editor-app.class';\nimport {Utils} from './utils.class';\nimport {Area} from './area.class';\nimport {AreaFactory} from './area-factory.class';\n\n\n@Component({\n    selector: '[ng2-image-map-editor]',\n    template: `<div id=\"wrapper\">\n    <header id=\"header\">\n        <nav id=\"nav\" class=\"clearfix\">\n            <ul class=\"float-left\">\n                <li id=\"to_html\">\n                    <a [class.btn-round-sm-primary]=\"!valid\" class=\"btn-round-sm-default\" href=\"#\" title=\"{{labels.save_answers}}\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                            <g>\n                                <g>\n                                    <g>\n                                        <path d=\"M305,148c11.046,0,20-8.954,20-20V90c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v38\n                                                    C285,139.046,293.954,148,305,148z\"/>\n                                        <path d=\"M492,352c11.046,0,20-8.954,20-20V102c0-5.304-2.107-10.392-5.858-14.142l-82-82C420.392,2.107,415.304,0,410,0H80\n                                                    C35.888,0,0,35.888,0,80v352c0,44.112,35.888,80,80,80h352c44.112,0,80-35.888,80-80c0-11.046-8.954-20-20-20\n                                                    c-11.046,0-20,8.954-20,20c0,22.056-17.944,40-40,40V312c0-11.046-8.954-20-20-20H100c-11.046,0-20,8.954-20,20v160\n                                                    c-22.056,0-40-17.944-40-40V80c0-22.056,17.944-40,40-40v118c0,33.084,26.916,60,60,60h201c33.084,0,60-26.916,60-60V40h0.716\n                                                    L472,110.284V332C472,343.046,480.954,352,492,352z M120,332h272v140H120V332z M361,158c0,11.028-8.972,20-20,20H140\n                                                    c-11.028,0-20-8.972-20-20V40h241V158z\"/>\n                                    </g>\n                                </g>\n                            </g>\n                        </svg>\n                    </a>\n                </li>\n                <li><a [class.btn-round-sm-default]=\"currentType != 'rectangle'\" [class.btn-round-sm-primary]=\"currentType == 'rectangle'\" id=\"rectangle\" href=\"#\"><img [src]=\"icons.rectangle\"></a></li>\n                <li><a [class.btn-round-sm-default]=\"currentType != 'circle'\"    [class.btn-round-sm-primary]=\"currentType == 'circle'\" href=\"#\" id=\"circle\"><img [src]=\"icons.circle\"></a></li>\n                <li><a [class.btn-round-sm-default]=\"currentType != 'polygon'\"   [class.btn-round-sm-primary]=\"currentType == 'polygon'\" href=\"#\" id=\"polygon\"><img [src]=\"icons.polygon\"></a></li>\n            </ul>\n            <ul class=\"float-right\">\n                <li class=\"btn\" id=\"edit\">\n                    <a [class.btn-round-sm-default]=\"isEditMode\" title=\"{{labels.edit}}\" [class.btn-round-sm-primary]=\"isEditMode\" class=\"btn-round-sm-default\" href=\"#\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                            <g>\n                                <g>\n                                    <path d=\"M481.996,30.006C462.647,10.656,436.922,0,409.559,0c-27.363,0-53.089,10.656-72.438,30.005L50.826,316.301\n                                            c-2.436,2.436-4.201,5.46-5.125,8.779L0.733,486.637c-1.939,6.968,0.034,14.441,5.163,19.542c3.8,3.78,8.892,5.821,14.106,5.821\n                                            c1.822,0,3.66-0.25,5.463-0.762l161.557-45.891c6.816-1.936,12.1-7.335,13.888-14.192c1.788-6.857-0.186-14.148-5.189-19.167\n                                            L93.869,329.827L331.184,92.511l88.258,88.258L237.768,361.948c-7.821,7.8-7.838,20.463-0.038,28.284\n                                            c7.799,7.822,20.464,7.838,28.284,0.039l215.98-215.392C501.344,155.53,512,129.805,512,102.442\n                                            C512,75.079,501.344,49.354,481.996,30.006z M143.395,436.158L48.827,463.02l26.485-95.152L143.395,436.158z M453.73,146.575\n                                            l-5.965,5.949l-88.296-88.297l5.938-5.938C377.2,46.495,392.88,40,409.559,40c16.679,0,32.358,6.495,44.152,18.29\n                                            C465.505,70.083,472,85.763,472,102.442C472,119.121,465.505,134.801,453.73,146.575z\"/>\n                                </g>\n                            </g>\n                        </svg>\n                     </a>\n                </li>\n                <li class=\"btn-round-sm-default\" id=\"clear\"><a class=\"btn-round-sm-default\" href=\"#\" title=\"{{labels.clear}}\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                        <g>\n                            <g>\n                                <g>\n                                    <path d=\"M472,83H351V60c0-33.084-26.916-60-60-60h-70c-33.084,0-60,26.916-60,60v23H40c-11.046,0-20,8.954-20,20s8.954,20,20,20\n                                                h20.712l24.374,315.987c0.007,0.092,0.015,0.185,0.023,0.278c1.816,19.924,10.954,38.326,25.73,51.816\n                                                C125.615,504.571,144.771,512,164.778,512h182.444c41.667,0,75.917-31.032,79.669-72.183\n                                                c1.003-11.001-7.101-20.731-18.101-21.734c-11.011-1.003-20.731,7.101-21.734,18.101C385.195,456.603,368.07,472,347.222,472\n                                                H164.778c-20.777,0-37.875-15.571-39.823-36.242L100.831,123h310.338l-17.082,221.462c-0.849,11.013,7.39,20.629,18.403,21.479\n                                                c0.524,0.04,1.043,0.06,1.56,0.06c10.347,0,19.11-7.974,19.919-18.463L451.288,123H472c11.046,0,20-8.954,20-20\n                                                S483.046,83,472,83z M311,83H201V60c0-11.028,8.972-20,20-20h70c11.028,0,20,8.972,20,20V83z\"/>\n                                    <path d=\"M165.127,163.019c-11.035,0.482-19.59,9.818-19.108,20.854l10,228.933c0.469,10.738,9.322,19.128,19.966,19.128\n                                                c0.294,0,0.591-0.006,0.888-0.02c11.035-0.482,19.59-9.818,19.108-20.854l-10-228.934\n                                                C185.499,171.092,176.145,162.523,165.127,163.019z\"/>\n                                    <path d=\"M326.019,182.127l-10,228.934c-0.482,11.035,8.073,20.372,19.108,20.854c0.297,0.013,0.593,0.02,0.888,0.02\n                                                c10.643,0,19.497-8.39,19.966-19.128l10-228.933c0.482-11.035-8.073-20.372-19.108-20.854\n                                                C335.856,162.527,326.501,171.092,326.019,182.127z\"/>\n                                    <path d=\"M236,183v228.933c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20V183c0-11.046-8.954-20-20-20S236,171.954,236,183z\"/>\n                                </g>\n                            </g>\n                        </g>\n                    </svg>\n                </a></li>\n                <li  id=\"show_help\"><a class=\"btn-round-sm-default\" href=\"#\">\n                    <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n                         viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\"\n                         xml:space=\"preserve\">\n                        <g>\n                            <g>\n                                <g>\n                                    <circle cx=\"256\" cy=\"127\" r=\"20\"/>\n                                    <path d=\"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256\n                                    s26.629,132.667,74.98,181.02C123.333,485.371,187.62,512,256,512c46.813,0,92.618-12.758,132.461-36.893\n                                    c9.448-5.724,12.467-18.022,6.744-27.469c-5.723-9.448-18.021-12.467-27.468-6.744C334.144,461.244,295.506,472,256,472\n                                    c-119.103,0-216-96.897-216-216S136.897,40,256,40s216,96.897,216,216c0,42.589-12.665,84.044-36.627,119.884\n                                    c-6.139,9.182-3.672,21.603,5.511,27.742c9.183,6.138,21.603,3.673,27.742-5.51C497.001,355.674,512,306.53,512,256\n                                    C512,187.62,485.371,123.333,437.02,74.98z\"/>\n                                    <path d=\"M256,187c-11.046,0-20,8.954-20,20v178c0,11.046,8.954,20,20,20s20-8.954,20-20V207C276,195.954,267.046,187,256,187z\"/>\n                                </g>\n                            </g>\n                        </g>\n                    </svg>\n                </a></li>\n            </ul>\n        </nav>\n        <div id=\"coords\"></div>\n        <div id=\"debug\"></div>\n    </header>\n    <div id=\"image_wrapper\">\n        <div id=\"image\">\n            <img src=\"\" alt=\"#\" id=\"img\" />\n            <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.2\" baseProfile=\"tiny\" id=\"svg\"></svg>\n        </div>\n    </div>\n</div>\n\n        <!-- From html block -->\n        <div id=\"from_html_wrapper\">\n            <form id=\"from_html_form\">\n                <h5>Loading areas</h5>\n                <span class=\"close_button\" title=\"close\"></span>\n                <p>\n                    <label for=\"code_input\">Enter your html code:</label>\n                    <textarea id=\"code_input\"></textarea>\n                </p>\n                <button id=\"load_code_button\">Load</button>\n            </form>\n        </div>\n        <!-- Get image form -->\n\n        <!-- Help block    {{''|translate}} -->\n        <div id=\"overlay\"></div>\n        <div id=\"help\">\n            <span class=\"close_button\" title=\"close\"></span>\n            <div class=\"txt\">\n                <section>\n                    <h2>{{labels.drawing_mode}}</h2>\n                    <p><span class=\"key\">ENTER</span> &mdash; {{labels.drawing_mode_enter}}</p>\n                    <p><span class=\"key\">ESC</span> &mdash; {{labels.drawing_mode_esc}}</p>\n                    <p><span class=\"key\">SHIFT</span> &mdash; {{labels.drawing_mode_shift}}</p>\n                </section>\n                <section>\n                    <h2>{{labels.editing_mode}}</h2>\n                    <p><span class=\"key\">DELETE</span> &mdash; {{labels.editing_mode_delete}}</p>\n                    <p><span class=\"key\">ESC</span> &mdash; {{labels.editing_mode_esc}}</p>\n                    <p><span class=\"key\">SHIFT</span> &mdash; {{labels.editing_mode_shift}}</p>\n                    <p><span class=\"key\">&uarr;</span> &mdash; {{labels.editing_mode_up}}</p>\n                    <p><span class=\"key\">&darr;</span> &mdash; {{labels.editing_mode_down}}</p>\n                    <p><span class=\"key\">&larr;</span> &mdash; {{labels.editing_mode_left}}</p>\n                    <p><span class=\"key\">&rarr;</span> &mdash; {{labels.editing_mode_right}}</p>\n                </section>\n            </div>\n        </div>`,\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => Ng2ImageMapEditorDirective),\n            multi: true\n        },\n        {\n            provide: NG_VALIDATORS,\n            useExisting: forwardRef(() => Ng2ImageMapEditorDirective),\n            multi: true\n        }\n    ]\n})\nexport class Ng2ImageMapEditorDirective implements ControlValueAccessor, OnChanges, OnInit {\n    @Input('answers') answers: any[] = [];\n    @Input('src') mainImageSrc: string;\n    @Input('width') mainImageWidth: number;\n\n    public valid: boolean = true;\n    public isEditMode: boolean = false;\n    public currentType: string = '';\n\n    public icons: any = {\n        rectangle: '/src/assets/img/test/rec.svg',\n        circle: '/src/assets/img/test/cir.svg',\n        polygon: '/src/assets/img/test/pol.svg'\n    };\n\n    public labels: any = {};\n\n    public static globalLabels: any = {\n        save_answers: 'Save answers',\n        edit: 'Edit',\n        clear: 'Clear',\n        drawing_mode: 'Drawing mode (rectangle / circle / polygon)',\n        drawing_mode_enter: 'stop polygon drawing (or click on first helper)',\n        drawing_mode_esc: 'cancel drawing of a new area',\n        drawing_mode_shift: 'square drawing in case of a rectangle and right angle drawing in case of a polygon',\n        editing_mode: 'Editing mode',\n        editing_mode_delete: 'remove a selected area',\n        editing_mode_esc: 'cancel editing of a selected area',\n        editing_mode_shift: 'edit and save proportions for rectangle',\n        editing_mode_up: 'move a selected area up',\n        editing_mode_down: 'move a selected area down',\n        editing_mode_left: 'move a selected area to the left',\n        editing_mode_right: 'move a selected area to the right'\n    };\n\n    public app: EditorApp;\n\n    public _value: string;\n    private _parsedValue: any;\n\n    private _loadedImage: string = '';\n\n    @Output() onAnswersUpdated = new EventEmitter();\n\n    constructor() {\n    }\n\n    validate(c: FormControl) {\n        if (this.valid) {\n            return null;\n        }\n        return {\n            required: true\n        };\n    }\n\n    propagateChange = (_: any) => {\n    };\n\n    registerOnChange(fn) {\n        this.propagateChange = fn;\n    }\n\n    registerOnTouched() {\n        // console.log('registerOnTouched');\n    }\n\n    writeValue(value: string) {\n        this._value = value;\n\n        if (this._value) {\n            this._parsedValue = JSON.parse(this._value);\n        }\n        if (this._value && this.mainImageWidth && this.app) {\n            if(this._loadedImage != this._parsedValue.img) {\n                this._loadedImage = this._parsedValue.img;\n                this.app.loadImage(this._parsedValue.img, this.mainImageWidth);\n                // console.log('writeValue loadImage', this._parsedValue.img, this.mainImageWidth);\n            }\n        }\n    }\n\n    public ngOnInit() {\n        this.labels = Ng2ImageMapEditorDirective.globalLabels;\n        this.app = new EditorApp();\n        Utils.app = this.app;\n        Area.app = this.app;\n\n        this.app.buttons.onSetInvalid = () => {\n            this.valid = false;\n            this.propagateChange([]);\n        };\n        this.app.buttons.onData = (answers: any[], areas: any) => {\n            this.valid = true;\n            this.propagateChange(areas);\n            this.answers = answers;\n            this.onAnswersUpdated.emit(answers);\n        };\n        this.app.onCurrentType = (type: string) => {\n            this.currentType = type;\n        };\n        this.app.onSetMode = (mode: string) => {\n            this.isEditMode = mode == 'editing';\n        };\n        this.app.onImageLoaded = (state: any) => {\n            // console.log('onImageLoaded');\n\n            if (this._value) {\n                var scale = 1;\n                if (state.image.width > this.app.domElements.img.clientWidth) {\n                    scale = Number((state.image.width / this.app.domElements.img.clientWidth).toFixed(3));\n                } else {\n                    scale = 1;\n                }\n                // console.log('onImageLoaded', this._parsedValue, this.app.img.width, this.app.domElements.img.clientWidth);\n                // console.log('scale', scale );\n\n                // console.log('this.answers', this.answers);\n\n                Utils.foreach(this._parsedValue.areas, (x, i, arr) => {\n                    if (x.type in AreaFactory.CONSTRUCTORS) {\n                        //adaptation coordinates in screen resolution\n                        x.coords.forEach((item, i, arr) => {\n                            x.coords[i] = Math.round(item / scale);\n                        });\n\n                        AreaFactory.CONSTRUCTORS[x.type].createFromSaved({\n                            coords: x.coords,\n                            href: x.href,\n                            alt: (this.answers[i] != undefined && this.answers[i].is_right) ? '1' : '0',//x.alt,\n                            title: (this.answers[i] != undefined) ? this.answers[i].body : x.title,\n                            number: i\n                        });\n                    }\n                });\n            }\n        };\n\n        if (this.mainImageSrc && this.mainImageWidth && this._loadedImage != this.mainImageSrc) {\n            this._loadedImage = this.mainImageSrc;\n            this.app.loadImage(this.mainImageSrc, this.mainImageWidth);\n            // console.log('ngOnInit loadImage', this.mainImageSrc, this.mainImageWidth);\n        }\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (this.mainImageSrc && this.mainImageWidth && this.app && this._loadedImage != this.mainImageSrc) {\n            this._loadedImage = this.mainImageSrc;\n            this.app.loadImage(this.mainImageSrc, this.mainImageWidth);\n            // console.log('ngOnChanges loadImage', this.mainImageSrc, this.mainImageWidth);\n        }\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {Ng2ImageMapEditorDirective} from './ng2-image-map-editor.directive';\n\n@NgModule({\n    imports: [],\n    declarations: [\n        Ng2ImageMapEditorDirective\n    ],\n    exports: [\n        Ng2ImageMapEditorDirective\n    ]\n})\nexport class Ng2ImageMapEditorModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵnamespaceSVG","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵnamespaceHTML","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵclassProp","i0.ɵɵpropertyInterpolate","i0.ɵɵproperty","i0.ɵɵtextInterpolate","i0.ɵɵtextInterpolate1"],"mappings":"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"}